{% load static %}
<!doctype html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞—Ç–∞–ª–æ–≥ —ñ–≥–æ—Ä</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'games/css/catalog.css' %}">
</head>
<body>

<header class="py-4 mb-4 text-center">
    <h1>–ö–∞—Ç–∞–ª–æ–≥ —ñ–≥–æ—Ä</h1>
    <p>–í–∏–±–µ—Ä—ñ—Ç—å –≥—Ä—É —Ç–∞ –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—è!</p>
    <a href="{% url 'cart:cart' %}" class="btn btn-success">üõí –ö–æ—à–∏–∫</a>
    <a href="/" class="btn btn-success">–ì–æ–ª–æ–≤–Ω–∞</a>
</header>

<div class="container">
    <div class="row g-4">
        {% for game in games %}
        <div class="col-md-4">
            <div class="card h-100 shadow-sm game-card">
                {% if game.image %}
                <img src="{{ game.image.url }}" class="card-img-top" alt="{{ game.title }}">
                {% endif %}

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ game.title }}</h5>
                    <p class="card-text">{{ game.description|truncatewords:20 }}</p>

                    <p class="mt-auto">
                        {% if game.price == 0 %}
                            <strong>–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ</strong>
                        {% else %}
                            <strong>{{ game.price }} –≥—Ä–Ω</strong>
                        {% endif %}
                    </p>

                    <div class="d-flex justify-content-between mt-2">
    <a href="{% url 'games:game_info' game.id %}" class="btn btn-outline-primary">–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ</a>

    {% if user.is_authenticated %}
        <a href="{% url 'games:buy_game' game.id %}" class="btn btn-primary">–ö—É–ø–∏—Ç–∏</a>
    {% else %}
        <a href="{% url 'login' %}?next={% url 'games:buy_game' game.id %}" class="btn btn-primary">–ö—É–ø–∏—Ç–∏</a>
    {% endif %}
</div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>